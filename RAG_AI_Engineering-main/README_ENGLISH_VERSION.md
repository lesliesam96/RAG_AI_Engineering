# AI Assistant for Data Science

## Overview

This project is an interactive web application designed to assist users in their data science projects. Built with Streamlit, it leverages various AI models to help users analyze data, answer questions, and provide insights. The app supports multiple file types, including PDFs, CSVs, and text files, and uses state-of-the-art language models to generate responses based on user queries.

## Features

- **Interactive UI**: Built with Streamlit for a user-friendly interface.
- **File Upload**: Supports uploading and processing of PDF, CSV, and text files.
- **Language Models**: Utilizes various language models for text generation and question-answering.
- **Data Visualization**: Integrates Seaborn and Matplotlib for data visualization.
- **Session Management**: Tracks user interactions and maintains session history.

## Requirements

- Python 3.10+
- Streamlit
- LangChain
- GenAI
- HuggingFace
- PyMuPDF (fitz)
- Pandas
- Numpy
- Seaborn
- Matplotlib
- dotenv

## Installation

1. Clone the repository:

   ```sh
   git clone https://github.com/your-repo/pdf-rag-main.git
   cd pdf-rag-main
   ```

2. Create a virtual environment:

   ```sh
   python3.10 -m venv .venv
   source .venv/bin/activate
   ```

3. Install the required packages:

   ```sh
   pip install -r requirements.txt
   pip install -r requirements-app.txt
   ```

4. Set up environment variables:
   There's a `.env` file in the `app` directory. Ensure it contains the necessary environment variables:
   ```env
   GENAI_KEY=your_genai_api_key
   GENAI_ENDPOINT=https://your_genai_endpoint
   ```

## Usage

1. Run the Streamlit app:

   ```sh
   streamlit run app/main.py
   ```

   Note: There are two main files (`main.py` and `MAIN1.py`) in the `app` directory. Make sure you're running the correct one.

2. Upload your data:

   - Go to the sidebar and click on "Browse files" to upload a PDF, CSV, or text file.

3. Interact with the assistant:
   - Use the text input box to ask questions or request data analysis.
   - View the responses and visualizations generated by the assistant.

## File Structure

```
pdf-rag-main/
├── app/
│   ├── images/
│   ├── utils/
│   │   └── embedding.py
│   ├── main.py
│   └── MAIN1.py
├── architecture/
│   └── [diagram and screenshot files]
├── content/
│   └── [CSV and other data files]
├── data/
│   └── adjusted_close.csv
├── vectorstore/
│   └── db_faiss/
├── [PDF files]
├── README_ENGLISH_VERSION.md
├── README_FRENCH_VERSON.md
└── requirements.txt
```

## Key Functions

### `embedding.py`

The `embedding.py` file plays a crucial role in document processing and vector database creation. Here are its main functionalities:

1. **File Loading**:

   - Uses various loaders (PyPDFLoader, CSVLoader, TextLoader) to process different file types (PDF, CSV, TXT).
   - Temporarily saves uploaded files for processing.

2. **Text Splitting**:

   - Utilizes `RecursiveCharacterTextSplitter` to divide documents into smaller chunks, facilitating processing and information retrieval.

3. **Embedding Creation**:

   - Uses `HuggingFaceEmbeddings` to create vector representations of the text.
   - Employs the "sentence-transformers/msmarco-distilbert-cos-v5" model by default.

4. **Vector Storage**:

   - Creates a FAISS vector store from document chunks and their embeddings.

5. **Retrieval System**:
   - Sets up an ensemble retrieval system combining a vector-based retriever and a BM25 retriever.
   - Allows for efficient and accurate searching within processed documents.

This functionality is essential for transforming raw documents into a structured and searchable form, enabling the AI assistant to quickly and efficiently access relevant information.

### File Processing:

- `read_csv_file(file_path)`: Reads a CSV file and returns a Pandas DataFrame.
- `process_csv(df)`: Processes a DataFrame and displays various statistics and visualizations.

### AI Integration:

- `initqachain(...)`: Initializes the question-answering chain with the selected language model and parameters.
- `create_pandas_agent(df)`: Creates a LangChain interface agent for the Pandas DataFrame.

### Utility Functions:

- `displayPDF(file_path, page_num)`: Displays a PDF page as an image.
- `generate_blog_post(topic, vector_store, k)`: Generates a blog post based on the topic using the vector store.

## Contributing

1. Fork the repository.
2. Create a new branch (`git checkout -b feature-branch`).
3. Make your changes.
4. Commit your changes (`git commit -am 'Add new feature'`).
5. Push to the branch (`git push origin feature-branch`).
6. Create a new Pull Request.

## Contact

For any questions or suggestions, please open an issue on GitHub or contact the maintainer at leslie.samantha.tientcheu.noumowe@ibm.com.
